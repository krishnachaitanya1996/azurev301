@using MyStayMVC.Utility;

<script type="text/javascript">
    $(document).ready(function () {
        //triggered when modal is about to be shown
        $('#myModal').on('show.bs.modal', function (e) {
            debugger;
            ID = $(e.relatedTarget).data('id');
            $('#hdnBookingID').val(ID);
        });
        $('#btnPay').click(function () {
            var ID = $('#hdnBookingID').val();
            debugger;
            $.ajax({
                cache: false,
                type: 'POST',
                url: '/Payment/PaymentDetails',
                data: 'ID=' + ID,
                success: function (data) {
                    window.location.href = "/Booking/BookingDetails";
                }
            });
        });
    });
</script>

<div id="divBookingInfoDetails">
    @if (Model.lstBooking.Count > 0)
    {
        <table class="table table-hover table-striped table-responsive">
            <thead font-weight:bold;" style="background-color:#d3d3d36e;">
                <tr>
                    <th>Hotel Name</th>
                    <th>Room Number</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>Payment</th>
                </tr>
            </thead>
            @foreach (Booking oBooking in Model.lstBooking)
            {
                <tr style="line-height:14px;">
                    <td>@oBooking.HotelName</td>
                    <td>@oBooking.RoomNumber</td>
                    <td>@String.Format("{0:dd MMM yyyy}", oBooking.StartDate)</td>
                    <td>@String.Format("{0:dd MMM yyyy}", oBooking.EndDate)</td>
                    <td>
                        @*href="@Url.Action("Payment", "Room", new { ID = oBooking.ID.ToString() })"*@
                        @if (oBooking.PaidStatus.Equals(Constants.PaymentStatus_Paid))
                        {
                        <p>@Constants.PaymentStatus_Paid</p>
                                }
                        else
                        {
                            <button type="button" data-toggle="modal" data-target="#myModal" data-id="@oBooking.ID">
                                Payment
                            </button>
                        }

                    </td>

                </tr>
            }
        </table>
    }
    else
    {
        <div>
            No Bookings found
        </div>
    }
</div>

<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
        <input type="hidden" id="hdnBookingID" />
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Payment</h4>
            </div>
            <div class="modal-body">
                <p>Do you want to make the Payment?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="padding-left: 20px;" id="btnPay">Pay</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>



